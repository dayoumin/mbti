---
name: content-audit-rules
description: 콘텐츠 품질 점검 규칙. 연령 등급, 태그, 형식 검사 기준 정의. content-quality-checker Agent가 참조.
allowed-tools: Read, Bash, Grep, Glob
---

# 콘텐츠 품질 점검기 (Content Auditor)

## 목적

기존 콘텐츠 전체를 스캔하여 **연령 등급 정확성**, **콘텐츠 적절성**, 품질 문제를 발견하고 개선 우선순위를 정리합니다.

**content-validator와 차이점:**
| 항목 | content-validator | content-auditor |
|------|-------------------|-----------------|
| 시점 | 생성 직후 | 정기/요청 시 |
| 범위 | 단일 콘텐츠 | 전체 콘텐츠 |
| 목적 | 형식 검증 | 품질 감사 + 연령 등급 감사 |

## 점검 항목

### 1. 연령 등급 정확성 (최우선 🚨)

**콘텐츠가 올바른 연령 등급을 가지고 있는지 검사합니다.**

#### 1.1 성인 콘텐츠 누락 검사 (ageRating: 'adult' 필요)
| 키워드/패턴 | 예시 | 조치 |
|------------|------|------|
| 술/주류 관련 | "술", "맥주", "와인", "회식 술자리" | `meta.ageRating: 'adult'` 필수 |
| 도박 관련 | "베팅", "도박", "카지노" | `meta.ageRating: 'adult'` 필수 |
| 성적 암시 | "19금", "야한", "선정적" | `meta.ageRating: 'adult'` 필수 |
| 연애/데이트 (성인) | "원나잇", "성인 관계" | `meta.ageRating: 'adult'` 필수 |

**심각도: 에러 (즉시 수정)**

#### 1.2 키즈 콘텐츠 잘못된 등급 검사
| 문제 | 예시 | 조치 |
|------|------|------|
| 어린이용인데 등급 없음 | 쉬운 동물 퀴즈, 단순 퀴즈 | `meta.ageRating: 'kids'` 권장 |
| 성인 주제인데 kids 등급 | 술자리 퀴즈에 kids 태그 | 등급 수정 필수 |
| 부적절한 난이도 | 전문 수의학 용어가 kids | 등급 검토 필요 |

**심각도: 에러 (등급 불일치), 경고 (등급 누락)**

#### 1.3 연령 등급 일관성 검사
| 항목 | 기준 | 심각도 |
|------|------|--------|
| 같은 시리즈 등급 불일치 | cat-k-001~012 일부만 kids | 경고 |
| 카테고리별 등급 분포 | 술 카테고리에 all 있음 | 에러 |
| meta.isAdultOnly vs ageRating | 둘 다 있거나 불일치 | 경고 |

### 2. 콘텐츠 적절성 (AI 판단)

**콘텐츠 내용 자체가 연령에 적합한지 검사합니다.**

| 항목 | 기준 | 심각도 |
|------|------|--------|
| 언어 수위 | 비속어, 은어, 성인 표현 | 에러 |
| 주제 적합성 | 어린이에게 부적절한 주제 | 에러 |
| 이미지/이모지 적절성 | 🍺🍷 등 주류 이모지 without adult 등급 | 경고 |
| 전문 정보 난이도 | 수의학 전문 용어가 kids에 포함 | 경고 |

### 3. 추천 시스템 호환성

| 항목 | 기준 | 심각도 |
|------|------|--------|
| tags 누락 | 모든 콘텐츠에 tags 필수 | 에러 |
| tags 부족 | 3개 이상 권장 | 경고 |
| tags 영문 | 한글 태그 권장 | 경고 |
| 첫 태그 카테고리 | 첫 태그는 카테고리명 | 경고 |

### 4. 태그 품질

| 항목 | 기준 | 심각도 |
|------|------|--------|
| 중복 태그 | 같은 콘텐츠 내 중복 | 에러 |
| 유사 태그 | 전체에서 `백신`/`예방접종` 등 | 경고 |
| 태그 일관성 | 같은 주제에 다른 태그 사용 | 정보 |

### 5. 콘텐츠 형식

| 항목 | 기준 | 심각도 |
|------|------|--------|
| id 형식 | `{category}-{type}-{번호}` | 에러 |
| 정답 개수 | 퀴즈는 정답 1개 | 에러 |
| 점수 범위 | 시나리오 점수 연속 | 에러 |

### 6. 내용 품질 (AI 판단)

| 항목 | 기준 | 심각도 |
|------|------|--------|
| 전문 정보 의심 | 수의학/식물학 수치 | 정보 |
| 맞춤법 의심 | 명백한 오타 | 경고 |
| 설명 누락 | explanation 없음 | 경고 |

## 점검 프로세스

### 1단계: 콘텐츠 파일 수집

```bash
# 점검 대상 파일
src/data/content/quizzes/*.ts
src/data/content/polls/*.ts
src/data/content/situation-reactions/*.ts
```

### 2단계: 연령 등급 검사 (최우선)

```javascript
// 각 콘텐츠에 대해:
1. 성인 키워드 스캔 ("술", "맥주", "와인", "도박", "베팅" 등)
   → 발견 시 meta.ageRating 또는 meta.isAdultOnly 확인
   → 없으면 에러

2. kids 등급 콘텐츠 내용 검토
   → 성인 주제, 어려운 용어, 부적절한 이모지 없는지

3. 카테고리별 등급 분포 검사
   → 술/주류 카테고리는 100% adult 등급이어야 함
   → kids 폴더/시리즈는 일관된 kids 등급이어야 함
```

### 3단계: 콘텐츠 적절성 검사

```javascript
// AI 판단 필요 항목:
1. 언어 수위 체크 (비속어, 은어)
2. 주제 적합성 (연령대별 적절한 주제인지)
3. 이모지 적절성 (🍺🍷 등은 adult 등급 필요)
4. 전문 용어 난이도 (kids에 수의학 용어 부적합)
```

### 4단계: 태그 및 형식 검사

```javascript
// 각 콘텐츠에 대해:
1. tags 존재 및 개수 확인 (3개 이상 권장)
2. id 형식 확인
3. 타입별 필수 필드 확인
```

### 5단계: 전체 태그 분석

```javascript
// 전체 태그 수집 후:
1. 태그별 사용 빈도 집계
2. 유사 태그 그룹 발견
3. 1회만 사용된 고유 태그 목록
```

### 6단계: 보고서 생성

```
=== 콘텐츠 품질 점검 보고서 ===

## 요약
- 총 콘텐츠: N개
- 🚨 연령 등급 에러: N개
- 에러: N개
- 경고: N개
- 정보: N개

## 🚨 연령 등급 문제 (최우선 수정)
1. [poll] vs-viral-XXX: "술" 포함하지만 adult 등급 없음
2. [situation] work-XXX: "회식 술자리" 포함하지만 adult 등급 없음
3. [quiz] kids-XXX: 어린이용이지만 전문 용어 포함

## 에러 (즉시 수정 필요)
1. [quiz] cat-k-001: tags 누락
2. [poll] vs-dog-001: 옵션 1개만 있음

## 경고 (권장 수정)
1. [quiz] plant-k-003: tags 2개 (3개 이상 권장)

## 정보 (검토 권장)
1. 유사 태그 발견: "백신" ↔ "예방접종"
2. 전문 정보 확인 필요: cat-k-004 (물 섭취량 수치)

## 연령 등급 분포
- adult: N개 (주류: X, 도박: Y)
- kids: N개 (퀴즈: X, 투표: Y)
- all (기본): N개

## 태그 통계
- 가장 많이 사용: 고양이(15), 강아지(12), 건강(10)
- 1회만 사용: 덤핑, 피스릴리 등 5개
```

## 실행 방법

### 전체 점검
```
"전체 콘텐츠 품질 점검해줘"
```

### 특정 카테고리만
```
"고양이 콘텐츠만 점검해줘"
"퀴즈만 점검해줘"
```

### 특정 항목만
```
"tags 상태만 점검해줘"
"연령 등급 점검해줘"
```

## 자동 수정 제안

점검 후 문제 발견 시:

```
## 자동 수정 가능 항목
1. [15개] tags 2개 → 3개 이상 추가 필요
2. [3개] 첫 태그 카테고리명 아님

자동 수정을 진행할까요? (Y/N)
```

**자동 수정 가능:**
- 첫 태그에 카테고리명 추가
- 유사 태그 통합 (사용자 확인 후)

**수동 수정 필요:**
- 전문 정보 검증
- 새 태그 추가
- 콘텐츠 내용 수정

## 정기 점검 권장 주기

| 시점 | 점검 내용 |
|------|----------|
| 콘텐츠 10개+ 추가 후 | 태그 일관성 |
| 월 1회 | 전체 품질 점검 |
| 새 기능 추가 후 | 호환성 점검 |

## 출력 파일

점검 결과는 다음 위치에 저장:
```
docs/CONTENT_AUDIT_YYYYMMDD.md
```

## 체크리스트

### 점검 전
- [ ] 최신 코드 pull 완료
- [ ] 빌드 에러 없음

### 점검 후
- [ ] 에러 항목 모두 수정
- [ ] 경고 항목 검토
- [ ] 빌드 재확인
