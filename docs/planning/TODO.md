# TODO - 향후 작업 목록

## 랭킹 시스템

### 맞춤형 랭킹 필터링
- **우선순위**: 낮음 (프로필 시스템 구축 후)
- **설명**: 사용자 맞춤형 랭킹 제공

**필터 옵션:**
| 필터 | 설명 |
|------|------|
| 연령대별 | 10대, 20대, 30대, 40대+ |
| 성별 | 남성, 여성, 전체 |
| 통합 | 전체 사용자 (현재 방식) |

**필요 작업:**
1. 프로필 정보 수집 (연령대, 성별 - 선택적)
2. DB 스키마 확장 - 결과 저장 시 프로필 정보 포함
3. API 필터링 지원 (`?ageGroup=20s&gender=all`)
4. UI 탭 전환 (`[전체] [내 연령대] [성별]`)

---

## 회원가입/인증 시스템

### 소셜 로그인 도입
- **우선순위**: 중간 (다기기 동기화 필요 시)
- **설명**: 현재 device_id 기반 익명 시스템에서 소셜 로그인으로 확장

**현재 상태:**
- `device_id` 기반 익명 사용자 추적
- `user_profiles` 테이블에 `user_id` 필드 준비됨 (미사용)
- 기기 변경 시 데이터 유실

**구현 옵션:**
| 옵션 | 장점 | 단점 |
|------|------|------|
| NextAuth.js | Next.js 통합 최적화, 다양한 프로바이더 | 설정 복잡도 |
| Supabase Auth | DB와 통합, RLS 연동 | Supabase 종속 |

**소셜 프로바이더 (우선순위):**
1. 카카오 - 한국 사용자 다수
2. 구글 - 범용성
3. 네이버 - 선택적

**필요 작업:**
1. NextAuth.js 또는 Supabase Auth 설정
2. 소셜 로그인 UI (로그인 버튼, 프로필 메뉴)
3. 익명 → 로그인 계정 병합 로직 (`merge_anonymous_to_auth`)
4. 다기기 데이터 동기화
5. 로그아웃/계정 삭제 처리

**참고 문서:**
- [EXTENSION_ARCHITECTURE.md](EXTENSION_ARCHITECTURE.md) - Supabase 스키마 설계
- [ROADMAP.md](../ROADMAP.md#L421) - Auth 계획 언급

---

## 콘텐츠 모더레이션

### AI 기반 댓글 자동 신고/판정 시스템
- **우선순위**: 중간 (커뮤니티 활성화 후)
- **설명**: 부적절한 댓글을 AI가 자동으로 감지하고 처리

**현재 상태:**
- 투표 생성 시 금지어 필터링 적용 중 (`moderateContent()` in [poll/route.ts](../../src/app/api/poll/route.ts))
- 댓글은 별도 필터링 없음
- 신고 기능 미구현

**구현 계획:**
| 단계 | 설명 |
|------|------|
| 1. 기본 필터링 | 금지어 기반 자동 필터링 (투표와 동일) |
| 2. AI 분석 | LLM 기반 맥락 이해 (비꼬기, 혐오 표현 등) |
| 3. 사용자 신고 | 수동 신고 + AI 판정 조합 |
| 4. 관리자 대시보드 | 신고 내역 확인, 판정 결과 검토 |

**기술 옵션:**
| 옵션 | 장점 | 단점 |
|------|------|------|
| OpenAI Moderation API | 간편, 저렴 | 한국어 지원 제한적 |
| Claude API | 한국어 우수, 맥락 이해 | 비용 |
| 자체 필터 + 키워드 | 무료, 빠름 | 맥락 파악 어려움 |

**필요 작업:**
1. `comments` 테이블에 `moderation_status` 필드 추가
2. 댓글 작성 시 기본 필터링 적용
3. 비동기 AI 분석 큐 구현 (선택적)
4. 신고 버튼 UI 및 API 추가
5. 관리자 페이지에서 모더레이션 현황 표시

---

*마지막 업데이트: 2025-12-20*