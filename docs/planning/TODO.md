# TODO - 향후 작업 목록

## 랭킹 시스템

### 맞춤형 랭킹 필터링
- **우선순위**: 낮음 (프로필 시스템 구축 후)
- **설명**: 사용자 맞춤형 랭킹 제공

**필터 옵션:**
| 필터 | 설명 |
|------|------|
| 연령대별 | 10대, 20대, 30대, 40대+ |
| 성별 | 남성, 여성, 전체 |
| 통합 | 전체 사용자 (현재 방식) |

**필요 작업:**
1. 프로필 정보 수집 (연령대, 성별 - 선택적)
2. DB 스키마 확장 - 결과 저장 시 프로필 정보 포함
3. API 필터링 지원 (`?ageGroup=20s&gender=all`)
4. UI 탭 전환 (`[전체] [내 연령대] [성별]`)

---

## 회원가입/인증 시스템

### 소셜 로그인 도입
- **우선순위**: 중간 (다기기 동기화 필요 시)
- **설명**: 익명 사용 유지 + 선택적 소셜 로그인으로 확장

**핵심 원칙:**
- **익명 사용 계속 가능** - 로그인 없이도 모든 기능 사용 가능
- **로그인은 선택적 혜택** - "로그인하면 다른 기기에서도 내 결과를 볼 수 있어요"
- 강제 가입 유도 없음, 자연스러운 전환 유도

**현재 상태:**
- `device_id` 기반 익명 사용자 추적 (정상 작동)
- `user_profiles` 테이블에 `user_id` 필드 준비됨 (미사용)
- 기기 변경 시 데이터 유실 → 로그인으로 해결

**소셜 프로바이더 (확정):**
| 순서 | 프로바이더 | 이유 |
|------|-----------|------|
| 1 | 카카오 | 한국 사용자 필수 |
| 2 | 구글 | 범용성, 글로벌 |
| 3 | 네이버 | 한국 사용자 추가 커버 |

**구현 기술:**
- NextAuth.js 사용 (Next.js 최적화, 3개 프로바이더 모두 지원)

**필요 작업:**
1. NextAuth.js 설정 (카카오/구글/네이버)
2. 로그인 UI (프로필 영역에 자연스럽게 배치)
3. 익명 → 로그인 계정 병합 로직 (`merge_anonymous_to_auth`)
4. 다기기 데이터 동기화
5. 로그아웃/계정 삭제 처리

**로그인 유도 메시지:**
| 시점 | 혜택 강조 | 위험 알림 |
|------|----------|----------|
| 프로필 페이지 | "다른 기기에서도 볼 수 있어요" | "브라우저 초기화 시 사라질 수 있어요" |
| 테스트 완료 후 | "결과를 안전하게 저장하세요" | "로그인 없이는 기기 변경 시 유실돼요" |
| 뱃지 획득 시 | "영구 보관하려면?" | - |

**UI/UX 구현:**
- NextAuth.js 기본 UI 활용 (커스텀 최소화)
- 참고할 오픈소스/템플릿:
  - [next-auth 공식 예제](https://github.com/nextauthjs/next-auth-example)
  - [shadcn/ui 로그인 컴포넌트](https://ui.shadcn.com/blocks/authentication)
- 로그인 버튼 스타일: 각 소셜 브랜드 가이드 준수

**개발자 계정 설정 (구현 시 필요):**
- [ ] 카카오 개발자 계정 + 앱 등록
- [ ] 구글 Cloud Console + OAuth 설정
- [ ] 네이버 개발자 센터 + 앱 등록
- ※ 실제 구현 시점에 진행

**참고 문서:**
- [EXTENSION_ARCHITECTURE.md](EXTENSION_ARCHITECTURE.md) - Supabase 스키마 설계

---

## 콘텐츠 모더레이션

### AI 기반 댓글 자동 신고/판정 시스템
- **우선순위**: 중간 (커뮤니티 활성화 후)
- **설명**: 부적절한 댓글을 AI가 자동으로 감지하고 처리

**현재 상태:**
- 투표 생성 시 금지어 필터링 적용 중 (`moderateContent()` in [poll/route.ts](../../src/app/api/poll/route.ts))
- 댓글은 별도 필터링 없음
- 신고 기능 미구현

**구현 계획:**
| 단계 | 설명 |
|------|------|
| 1. 기본 필터링 | 금지어 기반 자동 필터링 (투표와 동일) |
| 2. AI 분석 | LLM 기반 맥락 이해 (비꼬기, 혐오 표현 등) |
| 3. 사용자 신고 | 수동 신고 + AI 판정 조합 |
| 4. 관리자 대시보드 | 신고 내역 확인, 판정 결과 검토 |

**기술 옵션:**
| 옵션 | 장점 | 단점 |
|------|------|------|
| OpenAI Moderation API | 간편, 저렴 | 한국어 지원 제한적 |
| Claude API | 한국어 우수, 맥락 이해 | 비용 |
| 자체 필터 + 키워드 | 무료, 빠름 | 맥락 파악 어려움 |

**필요 작업:**
1. `comments` 테이블에 `moderation_status` 필드 추가
2. 댓글 작성 시 기본 필터링 적용
3. 비동기 AI 분석 큐 구현 (선택적)
4. 신고 버튼 UI 및 API 추가
5. 관리자 페이지에서 모더레이션 현황 표시

---

*마지막 업데이트: 2025-12-20*