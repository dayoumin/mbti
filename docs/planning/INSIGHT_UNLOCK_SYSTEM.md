# 나의 인사이트 - 점진적 해금 시스템 기획

> "흥미롭게 활동하다 보니 나를 알게 되는" 경험 설계

## 핵심 컨셉

### 목표
- 사용자가 **재미로 시작**해서 **의미있는 자기 발견**을 경험
- 활동할수록 더 많은 인사이트가 **점진적으로 해금**
- "다음 인사이트가 궁금해서" 자연스러운 리텐션 유도

### 차별화
| 다른 서비스 | 우리 앱 |
|-----------|--------|
| 한 번 테스트하고 끝 | 시간이 지나며 쌓임 |
| AI가 분석해줌 | 내 행동이 스스로 보여줌 |
| 정확한 진단 강조 | 재미있는 발견 강조 |
| 무거운 심리 분석 | 가벼운 퀴즈/투표로 시작 |

---

## 인사이트 카테고리 (7종)

### 1. 기본 성향 (Basic Profile)
**해금 조건**: 테스트 1개 완료 (즉시 해금)

```
표시 내용:
- 완료한 테스트 결과 종합
- 성격 레이더 차트 (human 테스트 완료 시)
- 한 줄 요약: "호기심 많고 공감력 높은 탐험가"

데이터 소스:
- resultService.getMyResults()
- profileService.getMyProfile()
```

**현재 상태**: ✅ 구현 가능 (ProfileService 활용)

---

### 2. 판단 스타일 (Decision Style)
**해금 조건**: 투표 5개 이상 참여

```
표시 내용:
- 실용 vs 감성 비율 (예: 70:30)
- 안전 vs 모험 비율 (예: 40:60)
- 혼자 vs 함께 비율 (예: 55:45)
- "결정할 때 실용을 중시하지만, 새로운 도전에 열려있어요"

데이터 소스:
- contentParticipationService.getParticipation().polls
- 각 투표의 선택지에 태그 필요 (실용/감성/안전/모험 등)
```

**현재 상태**: ⚠️ 부분 구현 필요
- 투표 참여 기록은 있음
- **필요**: 투표 선택지에 성향 태그 추가

---

### 3. 관심사 지도 (Interest Map)
**해금 조건**: 활동 10개 이상

```
표시 내용:
- 카테고리별 참여 비율 막대그래프
  🐱 고양이 ████████ 80%
  💑 관계심리 ██████ 60%
  🌱 자기계발 ████ 40%
  🐕 강아지 ░░░░░░ 0%
- "관계와 심리에 관심이 많으시네요"

데이터 소스:
- gamificationService.getQuizzesByCategory()
- gamificationService.getPollsByCategory()
- resultService (테스트별 참여)
```

**현재 상태**: ✅ 구현 가능 (GamificationService 활용)

---

### 4. 관계 패턴 (Relationship Pattern)
**해금 조건**: 관계 관련 활동 5개 이상
- 조건: conflictStyle 테스트 OR relationship/love 카테고리 퀴즈/투표 5개

```
표시 내용:
- 갈등 대처 스타일 (conflictStyle 테스트 결과)
- 투표/퀴즈에서 드러난 관계 성향
  - "갈등 상황에서 주로 피하는 편"
  - "상대방 감정을 먼저 고려하는 성향"
  - "직접 말하기보다 돌려 말하는 스타일"
- 시간에 따른 변화 (데이터 충분 시)

데이터 소스:
- conflictStyle 테스트 결과
- relationship/love 카테고리 situation-reaction 응답
- 투표 선택 패턴
```

**현재 상태**: ⚠️ 부분 구현 필요
- conflictStyle 테스트 있음
- situation-reaction 데이터 있음
- **필요**: 응답 패턴 분석 로직

---

### 5. 숨은 패턴 (Hidden Pattern)
**해금 조건**: 활동 30개 이상

```
표시 내용:
- 시간대별 참여 패턴
  "월요일엔 보수적인 답변이 많고, 금요일 저녁엔 모험적인 선택을 하시네요"
- 무의식적 선택 패턴
  "고양이 관련 질문에선 '독립성'을 중시하는데,
   연애 질문에선 '친밀감'을 중시하시네요.
   가까운 사람에겐 다른 기대가 있으신 건 아닐까요?"
- 카테고리 간 모순/일관성 분석

데이터 소스:
- 모든 참여 기록의 timestamp 분석
- 카테고리별 선택 태그 교차 분석
```

**현재 상태**: ❌ 신규 개발 필요
- **필요**: 시간대별 분석 로직
- **필요**: 교차 분석 알고리즘
- **필요**: 선택지 태그 시스템 고도화

---

### 6. 성장 여정 (Growth Journey)
**해금 조건**: 첫 활동 후 1개월 경과

```
표시 내용:
- 타임라인 형태의 활동 기록
  1월: 기본 성향 파악 (ENFP, 회피형 갈등)
  3월: 관계 패턴 발견 (표현 부족 인식)
  5월: 변화 감지 (직접 표현 답변 30%↑)
- 시간에 따른 변화 그래프
- "3개월 전보다 직접 표현하는 답변이 늘었어요"

데이터 소스:
- 모든 참여 기록의 시계열 분석
- 같은 유형 질문에 대한 답변 변화 추적
```

**현재 상태**: ❌ 신규 개발 필요
- **필요**: 시계열 분석 시스템
- **필요**: 동일 유형 질문 식별 (태그 기반)
- **필요**: 변화 감지 알고리즘

---

### 7. 나 vs 다른 사람 (Comparison)
**해금 조건**: 활동 15개 이상

```
표시 내용:
- 비슷한 성향 그룹과 비교
  "ENFP이면서 고양이 키우는 사람들 중
   상위 20%로 공감력이 높아요"
- 독특한 선택 하이라이트
  "이 투표에서 80%가 A를 골랐는데
   당신은 B를 골랐네요 - 독특한 시각!"
- 소수 의견 빈도
  "당신은 40%의 선택에서 소수 의견이었어요"

데이터 소스:
- 전체 사용자 투표 통계 (서버 필요)
- gamificationService.getMinorityVoteRatio()
```

**현재 상태**: ⚠️ 서버 연동 필요
- 소수 의견 비율은 로컬에서 계산 가능
- **필요**: 전체 사용자 통계 API
- **필요**: 성향 그룹 분류 시스템

---

## 해금 조건 요약

| 인사이트 | 해금 조건 | 표시 내용 | 구현 상태 |
|---------|----------|----------|----------|
| 기본 성향 | 테스트 1개 | 테스트 결과 종합 | ✅ 가능 |
| 판단 스타일 | 투표 5개 | 실용/감성, 안전/모험 비율 | ⚠️ 태그 필요 |
| 관심사 지도 | 활동 10개 | 카테고리별 참여 비율 | ✅ 가능 |
| 관계 패턴 | 관계 활동 5개 | 갈등/표현 스타일 | ⚠️ 분석 로직 |
| 숨은 패턴 | 활동 30개 | 시간대별, 무의식 패턴 | ❌ 신규 개발 |
| 성장 여정 | 1개월 경과 | 시간에 따른 변화 | ❌ 신규 개발 |
| 나 vs 다른 사람 | 활동 15개 | 그룹 비교, 독특한 선택 | ⚠️ 서버 필요 |

---

## 필요한 콘텐츠/시스템 추가

### 1. 투표 선택지 태그 시스템 (Priority: High)

현재 투표 구조:
```typescript
interface VSPoll {
  optionA: { id: 'a', text: string, emoji: string }
  optionB: { id: 'b', text: string, emoji: string }
}
```

필요한 확장:
```typescript
// 판단 스타일 분석용 태그
type DecisionTag =
  | 'practical' | 'emotional'      // 실용 vs 감성
  | 'safe' | 'adventurous'         // 안전 vs 모험
  | 'solo' | 'together'            // 혼자 vs 함께
  | 'direct' | 'indirect'          // 직접 vs 우회
  | 'logical' | 'intuitive';       // 논리 vs 직관

interface VSPollOption {
  id: 'a' | 'b';
  text: string;
  emoji: string;
  tags?: DecisionTag[];  // 신규 추가
}
```

**작업량**:
- 기존 투표 데이터에 태그 추가 (투표당 2개 옵션 × 현재 투표 수)
- InsightService에서 태그 집계 로직 추가

---

### 2. 관계 분석용 situation-reaction 확장 (Priority: Medium)

현재 구조:
```typescript
interface SituationReaction {
  options: {
    id: string;
    text: string;
    emoji: string;
    tag: ReactionTag;  // cool, emotional, rational, avoidant 등
  }[];
}
```

**현재 상태**: 이미 ReactionTag 있음 ✅

필요한 추가:
```typescript
// 관계 패턴 분석용 추가 태그
type RelationshipTag =
  | 'expressive' | 'reserved'      // 표현적 vs 내성적
  | 'self-first' | 'other-first'   // 자기중심 vs 상대중심
  | 'conflict-engage' | 'conflict-avoid';  // 갈등 직면 vs 회피

interface SituationReactionOption {
  // 기존 필드
  tag: ReactionTag;
  // 신규 추가
  relationshipTags?: RelationshipTag[];
}
```

---

### 3. InsightService 신규 개발 (Priority: High)

```typescript
// src/services/InsightService.ts

interface InsightStatus {
  id: string;
  name: string;
  unlocked: boolean;
  progress: number;        // 0-100 (해금까지 진행률)
  unlockCondition: string; // "투표 5개 더 참여하면 해금!"
  data?: InsightData;      // 해금 시에만 존재
}

interface InsightData {
  // 각 인사이트 유형별 데이터
}

class InsightService {
  // 모든 인사이트 상태 조회
  getAllInsights(): InsightStatus[];

  // 특정 인사이트 데이터 조회
  getInsight(id: string): InsightData | null;

  // 해금 조건 체크
  checkUnlockConditions(): void;

  // 판단 스타일 분석
  analyzeDecisionStyle(): DecisionStyleData;

  // 관심사 지도 생성
  generateInterestMap(): InterestMapData;

  // 관계 패턴 분석
  analyzeRelationshipPattern(): RelationshipPatternData;
}
```

---

### 4. 콘텐츠 추가 필요 (Priority: Medium)

**관계/심리 카테고리 콘텐츠 확충**:
- 현재: situation-reaction (relationship, work, social)
- 필요: 더 다양한 관계 상황 시나리오

**추천 추가 콘텐츠**:
1. 연애 상황 투표 (love 카테고리)
2. 갈등 대처 퀴즈 (relationship 카테고리)
3. 소통 스타일 situation-reaction
4. 감정 표현 관련 투표

---

## 구현 로드맵

### Phase 1: 기반 시스템 (1-2주)
1. InsightService 기본 구조 개발
2. 인사이트 해금 조건 체크 로직
3. "나의 인사이트" 페이지 UI 기본 틀

### Phase 2: 즉시 해금 가능 인사이트 (1주)
1. **기본 성향** - ProfileService 연동
2. **관심사 지도** - GamificationService 연동
3. 해금 애니메이션/UI 효과

### Phase 3: 태그 시스템 (2주)
1. 투표 선택지 태그 추가
2. **판단 스타일** 분석 로직 개발
3. 기존 콘텐츠에 태그 마이그레이션

### Phase 4: 관계 분석 (2주)
1. situation-reaction 관계 태그 추가
2. **관계 패턴** 분석 로직 개발
3. 관계 관련 콘텐츠 확충

### Phase 5: 고급 인사이트 (3-4주)
1. **숨은 패턴** - 시간대/교차 분석
2. **성장 여정** - 시계열 분석
3. **나 vs 다른 사람** - 서버 API 연동

---

## UI/UX 설계

### 메인 화면 (나의 인사이트)

```
┌─────────────────────────────────────────┐
│  🔮 나의 인사이트                        │
│  활동할수록 더 많이 열려요               │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ 📊 기본 성향           [보기 >] │   │
│  │ "호기심 많은 탐험가 타입"        │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ 🎯 판단 스타일         [보기 >] │   │
│  │ 실용 70% | 감성 30%             │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ 🔒 관계 패턴                     │   │
│  │ "관계 활동 3개 더 하면 해금!"   │   │
│  │ ████████░░ 2/5                  │   │
│  └─────────────────────────────────┘   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ 🔒 숨은 패턴                     │   │
│  │ "활동 18개 더 하면 해금!"       │   │
│  │ ████░░░░░░ 12/30               │   │
│  └─────────────────────────────────┘   │
│                                         │
└─────────────────────────────────────────┘
```

### 잠금 상태 UI
- 반투명 블러 처리
- 해금까지 남은 조건 명확히 표시
- 진행률 바 (동기부여)
- "이 인사이트에서 알 수 있는 것" 힌트 제공

### 해금 시 경험
- 팝업/모달로 "새 인사이트 해금!" 알림
- 간단한 애니메이션 효과
- 첫 해금 시 튜토리얼 제공

---

## 예상 효과

### 리텐션 개선
- "다음 인사이트 해금"이라는 명확한 목표
- 활동할수록 보상(자기 이해)이 쌓이는 경험
- 30개 활동 목표 → 약 2주간 꾸준한 방문 유도

### 사용자 가치
- 단순 재미 → 의미있는 자기 발견으로 전환
- "이 앱 계속 쓰면 나에 대해 더 알게 돼"
- 다른 테스트 앱과 차별화

### 바이럴 가능성
- "내 숨은 패턴 봤는데 신기해"
- "성장 여정 공유" 기능 추가 가능
- 비교 인사이트로 친구 초대 유도

---

## 리스크 및 대응

| 리스크 | 대응 방안 |
|-------|----------|
| 데이터 부족으로 분석 부정확 | 최소 데이터 요건 설정, "아직 데이터가 부족해요" 표시 |
| 해금 조건이 너무 높음 | A/B 테스트로 적정 조건 찾기 |
| 분석 결과가 뻔함 | 재미있는 표현/비유 사용, 구체적 사례 제시 |
| 프라이버시 우려 | 모든 데이터 로컬 저장 명시, 삭제 옵션 제공 |

---

## 다음 단계

1. **우선순위 결정**: 어떤 인사이트부터 구현할지
2. **태그 시스템 설계**: 투표/퀴즈 선택지 태그 체계 확정
3. **InsightService 설계**: 상세 인터페이스 정의
4. **콘텐츠 확충 계획**: 필요한 관계/심리 콘텐츠 목록화
